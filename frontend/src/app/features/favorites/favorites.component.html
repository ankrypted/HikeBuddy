<div class="fav-wrapper">
  <main class="fav-main">

    <header class="fav-header">
      <h1 class="fav-title">Saved Trails</h1>
      <p class="fav-subtitle">Trails you've bookmarked for your next adventure</p>
    </header>

    @if (favService.favorites().length === 0) {

      <!-- Empty state -->
      <div class="empty-state">
        <svg class="empty-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"
                stroke="currentColor" stroke-width="1.5"
                stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <p class="empty-title">No saved trails yet</p>
        <p class="empty-sub">Browse trails and tap the bookmark icon to save them here.</p>
        <a class="btn-browse" routerLink="/dashboard/trails">Browse Trails →</a>
      </div>

    } @else {

      <hb-trail-filters
        [regions]="regions()"
        (filtersChange)="onFiltersChange($event)"
      />

      @if (filteredFavorites().length === 0) {

        <div class="state-message">No saved trails match your filters.</div>

      } @else {

        <ul class="fav-list">
          @for (trail of filteredFavorites(); track trail.id) {
            <li
              class="fav-row glass"
              role="button"
              tabindex="0"
              [attr.aria-label]="'View trail: ' + trail.name"
              (click)="navigate(trail)"
              (keydown.enter)="navigate(trail)"
            >
              <!-- Difficulty colour band -->
              <div class="fav-thumb fav-thumb--{{ trail.difficulty.toLowerCase() }}">
                <span class="thumb-label">{{ trail.difficulty }}</span>
              </div>

              <!-- Trail info -->
              <div class="fav-body">
                <div class="fav-chips">
                  <span class="chip chip--{{ trail.difficulty.toLowerCase() }}">{{ trail.difficulty }}</span>
                  <span class="chip">{{ trail.distanceKm }} km</span>
                  <span class="chip">↑ {{ trail.elevationGainM }} m</span>
                  <span class="chip">~ {{ formatDuration(trail.durationMinutes) }}</span>
                </div>
                <h2 class="fav-name">{{ trail.name }}</h2>
                <p class="fav-region">{{ trail.region.name }}, {{ trail.region.country }}</p>
              </div>

              <!-- Remove + navigate -->
              <div class="fav-action">
                <button
                  class="remove-btn"
                  type="button"
                  aria-label="Remove from saved"
                  (click)="remove(trail, $event)"
                >
                  <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/>
                  </svg>
                </button>
                <span class="arrow-icon">→</span>
              </div>

            </li>
          }
        </ul>

      }

    }

  </main>
</div>
