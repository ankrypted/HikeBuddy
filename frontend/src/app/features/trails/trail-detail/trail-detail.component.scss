@use 'styles/variables' as v;

// ─── Page wrapper — dark overlay on top of fixed scene background ──────
.detail-wrapper {
  position:       relative;
  z-index:        1;
  min-height:     100vh;
  display:        flex;
  flex-direction: column;
  background:     linear-gradient(180deg,
    rgba(5, 13, 25, 0.68) 0%,
    rgba(5, 13, 25, 0.90) 25%,
    rgba(5, 13, 25, 0.96) 60%
  );
}

// ─── Main content container ────────────────────────────────────────────
.trail-detail {
  max-width:  860px;
  width:      100%;
  margin:     0 auto;
  padding:    2.5rem 2rem 4rem;
  display:    flex;
  flex-direction: column;
  gap:        2rem;
}

// ─── State messages (loading / error) ─────────────────────────────────
.state-message {
  padding:    4rem 2rem;
  text-align: center;
  color:      v.$text-muted;
  font-size:  1rem;

  &--error { color: #e07070; }
}

// ─── Hero ──────────────────────────────────────────────────────────────
.trail-hero {
  padding-top: 1rem;
}

.trail-chips {
  display:   flex;
  flex-wrap: wrap;
  gap:       0.5rem;
  margin-bottom: 1rem;
}

.chip {
  display:        inline-flex;
  align-items:    center;
  padding:        0.28rem 0.75rem;
  border-radius:  2rem;
  font-size:      0.75rem;
  font-weight:    600;
  letter-spacing: 0.04em;
  text-transform: uppercase;
  background:     rgba(255, 255, 255, 0.08);
  border:         1px solid rgba(255, 255, 255, 0.15);
  color:          v.$text-muted;

  &--easy   { background: rgba(63, 185, 80,  0.18); border-color: rgba(63, 185, 80,  0.4); color: #7edb5a; }
  &--moderate { background: rgba(255, 180, 0, 0.15); border-color: rgba(255, 180, 0, 0.4); color: #ffc940; }
  &--hard   { background: rgba(255, 90,  50, 0.15); border-color: rgba(255, 90,  50, 0.4); color: #ff7a55; }
  &--expert { background: rgba(200, 40,  40, 0.15); border-color: rgba(200, 40,  40, 0.4); color: #ff5555; }
}

.trail-name {
  font-size:      clamp(2.2rem, 5vw, 3.4rem);
  font-weight:    800;
  line-height:    1.1;
  letter-spacing: -0.02em;
  margin-bottom:  0.4rem;
}

.trail-region {
  font-size:    0.9rem;
  color:        v.$text-muted;
  margin-bottom: 0.9rem;
}

.trail-rating {
  display:     flex;
  align-items: center;
  gap:         0.4rem;
}

.stars { display: flex; gap: 2px; }

.star {
  font-size: 1rem;
  color:     rgba(255, 255, 255, 0.2);

  &--filled { color: #ffc940; }
}

.rating-value {
  font-size:   0.9rem;
  font-weight: 700;
  color:       #fff;
}

.rating-count {
  font-size: 0.8rem;
  color:     v.$text-muted;
}

// ─── Action row (Save + Complete buttons) ─────────────────────────────
.trail-action-row {
  display:   flex;
  flex-wrap: wrap;
  gap:       0.6rem;
  margin-top: 1rem;
}

// ─── Save Trail button ─────────────────────────────────────────────────
.btn-save {
  display:         inline-flex;
  align-items:     center;
  justify-content: center;
  gap:             0.5rem;
  min-width:       12.5rem;
  padding:         0.5rem 1.3rem;
  border-radius:   2rem;
  font-size:       0.85rem;
  font-weight:     600;
  letter-spacing:  0.02em;
  cursor:          pointer;
  color:           v.$text-muted;
  background:      rgba(255, 255, 255, 0.07);
  border:          1px solid rgba(255, 255, 255, 0.15);
  transition:      all 0.2s;

  svg { width: 16px; height: 16px; flex-shrink: 0; }

  &:hover {
    color:        v.$accent-green;
    border-color: rgba(126, 203, 63, 0.55);
    background:   rgba(126, 203, 63, 0.08);
  }

  &--saved {
    color:        v.$accent-green;
    border-color: rgba(126, 203, 63, 0.45);
    background:   rgba(126, 203, 63, 0.10);
  }

  &--saved:hover {
    color:        #f08080;
    border-color: rgba(240, 128, 128, 0.5);
    background:   rgba(240, 128, 128, 0.08);
  }
}

// ─── Mark as Completed button ─────────────────────────────────────────
.btn-complete {
  display:         inline-flex;
  align-items:     center;
  justify-content: center;
  gap:             0.5rem;
  min-width:       12.5rem;
  padding:         0.5rem 1.3rem;
  border-radius:   2rem;
  font-size:       0.85rem;
  font-weight:     600;
  letter-spacing:  0.02em;
  cursor:          pointer;
  color:           v.$text-muted;
  background:      rgba(255, 255, 255, 0.07);
  border:          1px solid rgba(255, 255, 255, 0.15);
  transition:      all 0.2s;

  svg { width: 16px; height: 16px; flex-shrink: 0; }

  &:hover {
    color:        v.$accent-green;
    border-color: rgba(126, 203, 63, 0.55);
    background:   rgba(126, 203, 63, 0.08);
  }

  &--done {
    color:        v.$accent-green;
    border-color: rgba(126, 203, 63, 0.45);
    background:   rgba(126, 203, 63, 0.10);
  }

  &--done:hover {
    color:        #f08080;
    border-color: rgba(240, 128, 128, 0.5);
    background:   rgba(240, 128, 128, 0.08);
  }
}

// ─── Description ──────────────────────────────────────────────────────
.trail-description {
  padding:       2rem;
  border-radius: 16px;

  h2 {
    font-size:     1.15rem;
    font-weight:   700;
    margin-bottom: 1rem;
    color:         #fff;
  }
}

.desc-text {
  font-size:   0.95rem;
  line-height: 1.75;
  color:       rgba(255, 255, 255, 0.80);
}

.trail-tags {
  display:   flex;
  flex-wrap: wrap;
  gap:       0.5rem;
  margin-top: 1.4rem;
}

.tag {
  padding:        0.22rem 0.7rem;
  border-radius:  2rem;
  font-size:      0.72rem;
  font-weight:    600;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color:          v.$accent-green;
  background:     rgba(126, 203, 63, 0.12);
  border:         1px solid rgba(126, 203, 63, 0.28);
}

// ─── More Details CTA ─────────────────────────────────────────────────
.more-details-row {
  display:         flex;
  justify-content: center;
}

.btn-more-details {
  display:         inline-flex;
  align-items:     center;
  gap:             0.5rem;
  padding:         0.65rem 2rem;
  border-radius:   2rem;
  font-size:       0.9rem;
  font-weight:     700;
  letter-spacing:  0.04em;
  color:           #0d1b2a;
  background:      v.$accent-green;
  border:          none;
  cursor:          pointer;
  transition:      background 0.2s, box-shadow 0.2s, transform 0.2s;
  box-shadow:      0 0 14px rgba(126, 203, 63, 0.50), 0 0 32px rgba(126, 203, 63, 0.20);

  &:hover:not(:disabled) {
    background:  #8fd94a;
    box-shadow:  0 0 20px rgba(126, 203, 63, 0.75), 0 0 44px rgba(126, 203, 63, 0.30);
    transform:   translateY(-1px);
  }

  &:disabled {
    opacity: 0.65;
    cursor:  not-allowed;
  }

  .coming-soon {
    font-size:      0.65rem;
    font-weight:    500;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    opacity:        0.7;
  }
}

// ─── Reviews ──────────────────────────────────────────────────────────
.reviews-section { display: flex; flex-direction: column; gap: 1rem; }

.reviews-heading {
  font-size:   1.15rem;
  font-weight: 700;
  color:       #fff;
}

.reviews-grid {
  display:               grid;
  grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
  gap:                   1rem;
}

.review-card {
  padding:       1.4rem;
  border-radius: 14px;
}

.review-header {
  display:     flex;
  align-items: center;
  gap:         0.8rem;
  margin-bottom: 0.9rem;
}

.reviewer-avatar {
  width:           40px;
  height:          40px;
  border-radius:   50%;
  background:      rgba(126, 203, 63, 0.18);
  border:          1px solid rgba(126, 203, 63, 0.35);
  display:         flex;
  align-items:     center;
  justify-content: center;
  font-size:       0.75rem;
  font-weight:     700;
  color:           v.$accent-green;
  flex-shrink:     0;
}

.reviewer-meta {
  display:        flex;
  flex-direction: column;
  gap:            2px;
  flex:           1;
}

.reviewer-name {
  font-size:   0.88rem;
  font-weight: 700;
  color:       #fff;
}

.review-date {
  font-size: 0.72rem;
  color:     v.$text-muted;
}

.review-stars {
  display: flex;
  gap:     2px;
  .star { font-size: 0.9rem; }
}

.review-text {
  font-size:   0.875rem;
  line-height: 1.65;
  color:       rgba(255, 255, 255, 0.75);
}

// ─── Review form ──────────────────────────────────────────────────────
.review-form {
  padding:       1.75rem 2rem;
  border-radius: 16px;
  transition:    background 0.3s;

  &--done {
    background: rgba(126, 203, 63, 0.06);
    border:     1px solid rgba(126, 203, 63, 0.2);
  }
}

.form-heading {
  font-size:     1rem;
  font-weight:   700;
  color:         #fff;
  margin-bottom: 1.2rem;
}

.star-picker {
  display:       flex;
  align-items:   center;
  gap:           0.15rem;
  margin-bottom: 1.2rem;
}

.star-pick {
  background:  none;
  border:      none;
  cursor:      pointer;
  font-size:   2rem;
  line-height: 1;
  color:       rgba(255, 255, 255, 0.18);
  padding:     0 0.1rem;
  transition:  color 0.12s, transform 0.1s;

  &:hover,
  &--active { color: #ffc940; }

  &:hover { transform: scale(1.18); }
}

.picker-label {
  margin-left: 0.6rem;
  font-size:   0.8rem;
  font-weight: 600;
  color:       #ffc940;
}

.review-textarea {
  width:         100%;
  min-height:    110px;
  background:    rgba(255, 255, 255, 0.05);
  border:        1px solid rgba(255, 255, 255, 0.12);
  border-radius: 10px;
  color:         #fff;
  font-size:     0.9rem;
  line-height:   1.65;
  padding:       0.8rem 1rem;
  resize:        vertical;
  font-family:   inherit;
  box-sizing:    border-box;
  margin-bottom: 1rem;
  transition:    border-color 0.2s;

  &::placeholder { color: rgba(255, 255, 255, 0.28); }

  &:focus {
    outline:      none;
    border-color: rgba(126, 203, 63, 0.5);
  }
}

.form-footer {
  display:     flex;
  align-items: center;
  gap:         1rem;
}

.btn-submit-review {
  padding:        0.55rem 1.6rem;
  border-radius:  2rem;
  font-size:      0.85rem;
  font-weight:    700;
  letter-spacing: 0.04em;
  color:          #0d1b2a;
  background:     v.$accent-green;
  border:         none;
  cursor:         pointer;
  transition:     background 0.2s, opacity 0.2s, transform 0.15s;

  &:hover:not(:disabled) {
    background: #8fd94a;
    transform:  translateY(-1px);
  }

  &:disabled {
    opacity: 0.38;
    cursor:  not-allowed;
  }
}

.form-hint {
  font-size: 0.75rem;
  color:     v.$text-muted;
}

.review-success {
  display:        flex;
  flex-direction: column;
  align-items:    center;
  gap:            0.5rem;
  padding:        0.75rem 0;
  text-align:     center;

  .success-icon {
    font-size:   2.4rem;
    line-height: 1;
    color:       v.$accent-green;
  }

  p {
    font-size: 0.9rem;
    color:     rgba(255, 255, 255, 0.75);
    margin:    0;
  }
}

// ─── Responsive ───────────────────────────────────────────────────────
@media (max-width: v.$bp-md) {
  .trail-detail { padding: 1.5rem 1.25rem 3rem; }

  .reviews-grid { grid-template-columns: 1fr; }
}

@media (max-width: v.$bp-sm) {
  .trail-description { padding: 1.25rem; }

  .review-card   { padding: 1rem; }

  .review-form   { padding: 1.25rem; }

  .star-pick     { font-size: 1.7rem; }
}
